<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <title>WebSocket</title>
 </head>
 <body>
     <h1>websocket连接并发送数据</h1>
     <input type="text" id="sendTxt">
     <button id="sendBtn">发送</button>
     <button id="close">关闭</button>
     <div id="recv"></div>
     <script type="text/javascript">
         
         function getJsonStr(action, info) {
             return '{"action":"'+action+'", "info":"'+info+'"}';
         }

         function getJsonObj(jsonStr){
             jsonStr = JSON.parse(jsonStr);
             return JSON.parse(jsonStr);
         }
         
         var websocket = new WebSocket("ws://192.168.1.104:8089/");
         websocket.onopen = function(){
             console.log("websocket open");
             document.getElementById("recv").innerHTML = "connect to 192.168.1.104:8089 successed";
         }
         websocket.inclose = function(){
             console.log('websocket close');
         }
         websocket.onmessage = function(e){
             console.log(e.data);
             var jsonObj = getJsonObj(e.data);
             document.getElementById("recv").innerHTML = jsonObj.status+":"+jsonObj.message;
         }
         document.getElementById("sendBtn").onclick=function(){
             var txt = document.getElementById("sendTxt").value;
             txt = getJsonStr("getRoomInfo", txt);
             websocket.send(txt);
         }



     </script>
